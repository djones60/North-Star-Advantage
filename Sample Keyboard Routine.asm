KEYBOARD INPUT EXAMPLE

0oDo == SPRCS == 0D0H					; STATUS REG 2 ADDR
0040 == CHRDY == 040H					; KEYBOARD STATUS MASK
0oF8 == CNTRG == 0F0H					; CONTROL REGISTER ADDR
0038 == NORM == 018H					; NORMAL CONTROL REG VALUE
0001 == CHDSL == 001H					; COMMAND TO SHOW LOWER NIBBLE
0002 == CHDSU == 002E					; COMMAND TO SHOW UPPER NIBBLE
0000' DBDO KEY:		IN SPRCS			; STATUS REG 2
0002' E640			ANI CHRDY			; TEST FOR CHARACTER READY
0004' 28FA			JRz KEY				; WAIT FOR KEYSTROKE
0006' DBDO			IN SPRCS			; RESPONSE TO CURRENT COMMAND
0008' 6F			MOV L,A				; SAVE FOR COMMAND ACK TEST
0009' 3E19			MVI A, NORM+CHDSL	; LOWER NIBBLE COMMAND
0003' D3Fo			OUT CNTRG			; REQUEST LOWER NIBBLE FIRST
00oD' DBDO KEYl:	IN SPRCS
OOOF' AD			XRA L				; TEST FOR COMMAND ACK
0010' F2 00oD'		JP KEYI				; WAIT FOR COMMAND ACK
0013' DBDO			IN SPRCS			; GET LOWER NIBBLE
0015' E6oF			ANI 15				; MASK TO NIBBLE ONLY
0017' 67			MOV H,A
0018' 3E1A			MVI A, NORM+CHDSU	; UPPER NIBBLE COMMAND
001A' D3Fo			OUT CNTRG			; ALSO ADJUSTS FIFO AND STATUS
001C' DBDO KEY2:	IN SPRCS
001E' AD			XRA L
001F' FA 001C'		JM KEY2				; WAIT FOR ANOTHER ACK
0022' DBDO			IN SPRCS			; GET UPPER NIBBLE
0024' 87			ADD A				; x2
0025' 87			ADD A				; X4
0026' 87			ADD A				; X8
0027' 87			ADD A				; X16
0028' B4			ORA H				; COMBINE THE TWO NIBBLES
0029' 09			RET
.END